<%= link_to '<- Back', event_spaces_index_path, class: 'btn btn-light'  %>
<div class="container">
  <div class="space-title">
    <h1><%= @event_space.name.capitalize %></h1>
  </div>
  <section id="photoArray">
    <div style="background-size: cover; background-repeat: no-repeat; background-image: url(<%=@event_space.photos.attached? ? cl_image_path(@event_space.photos.first.key) : "http://source.unsplash.com/featured/?#{@event_space.location}&#{rand(1000)}/450x450"%>)"> </div>
    <div style="background-size: cover; background-repeat: no-repeat; background-image: url(<%=@event_space.photos.attached? ? cl_image_path(@event_space.photos.second.key) : "http://source.unsplash.com/featured/?#{@event_space.location}&#{rand(1000)}/450x450"%>)"> </div>
    <div style="background-size: cover; background-repeat: no-repeat; background-image: url(<%=@event_space.photos.attached? ? cl_image_path(@event_space.photos.third.key) : "http://source.unsplash.com/featured/?#{@event_space.location}&#{rand(1000)}/450x450"%>)"> </div>
    <div style="background-size: cover; background-repeat: no-repeat; background-image: url(<%=@event_space.photos.attached? ? cl_image_path(@event_space.photos.forth.key) : "http://source.unsplash.com/featured/?#{@event_space.location}&#{rand(1000)}/450x450"%>)"> </div>
    <div style="background-size: cover; background-repeat: no-repeat; background-image: url(<%=@event_space.photos.attached? ? cl_image_path(@event_space.photos.fifth.key) : "http://source.unsplash.com/featured/?#{@event_space.location}&#{rand(1000)}/450x450"%>)"> </div>
  </section>
  <div class="flex-container">
    <div class="row mt-3">
      <div class="col">
        <div class="spaces-card p-4">
          <div id="show-inline">
            <span id="show-city">
              <h2><%= @event_space.location.capitalize %></h2>
            </span>
            <span id="show-price">
              <h2>Â¥<%= @event_space.price.to_i %></h2>
            </span>
          </div>
          <br>
          <p><%= @event_space.description %></p>
          <p>address: <%= @event_space.address %></p>
          <p><%= @event_space.size %> square meters</p>
          <p><%= @event_space.capacity %> capacity</p>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#reviewModal">Add a Review</button>
        </div>
      </div>
      <div class="col">
        <div class="spaces-card">
          <div style="width: 100%; height: 100%;"
            data-controller="map"
            data-map-markers-value="<%= @markers.to_json %>"
            data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="flex-container">
    <div class="row">
      <div class="col">
        <div class="review-card">
          <h4>Reviews</h4>
          <ul>
            <% @event_space.reviews.each do |review| %>
              <li>
                <h6><%= review.comment%></h6>
                <p><% (review.rating).times do %>
                    <i class="fa-solid fa-star text-warning"></i>
                  <% end %>
                </p>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
      <div class="col">
        <div class="review-card">
          <h2>Booking</h2>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
<div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"><%= @event_space.name.capitalize %></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <%= render "reviews/form" %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
